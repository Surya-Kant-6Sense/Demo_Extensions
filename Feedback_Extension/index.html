<!--
  Name: index.html
  Purpose: Feedback Form for submitting feedback to the 6Sight Feedback Extension
  Author: Surya Kant Mani
  Date: September 26, 2024
  Version: 1.0.0
  Developer Notes: This file is responsible for rendering the Feedback Form UI, including capturing dashboard information and user feedback.
-->

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>6Sight Feedback Form</title>
  <link href="style.css" rel="stylesheet">
</head>
<body>
  <div id="feedback-form-container" class="container">
    <!-- Feedback Form -->
    <h1>6Sight Feedback Form</h1>
    <form id="feedback-form">
      <!-- Dashboard field - uneditable, pre-filled with workbook name -->
      <div>
        <label for="dashboard">Dashboard</label>
        <input type="text" id="dashboard" disabled>
      </div>

      <!-- Screen field - uneditable, pre-filled with the name of the current view -->
      <div>
        <label for="screen">Screen</label>
        <input type="text" id="screen" disabled>
      </div>

      <!-- View - Drop-down for selecting the sheet the user interacted with -->
      <div>
        <label for="view">View</label>
        <select id="view">
          <!-- Dynamically populate sheet names -->
        </select>
        <input type="checkbox" id="no-view" /> Not related to any view
      </div>

      <!-- Feedback Type dropdown -->
      <div>
        <label for="feedback-type">Type</label>
        <select id="feedback-type">
          <option value="feature">Feature Request</option>
          <option value="general">General Feedback</option>
          <option value="data_anomaly">Data Anomaly</option>
          <option value="ui_enhancement">UI Enhancement</option>
          <option value="question">Question</option>
        </select>
      </div>

      <!-- Mark as Urgent for Data Anomaly -->
      <div id="urgent-container" class="d-none">
        <input type="checkbox" id="mark-urgent"> Mark as Urgent
      </div>

      <!-- Feedback text box -->
      <div>
        <label for="feedback-text">Feedback</label>
        <textarea id="feedback-text" placeholder="In case of multiple feedbacks, please separate them with a semicolon ‘;’"></textarea>
      </div>

      <!-- Insert Image buttons -->
      <div>
        <label>Insert Image</label>
        <button type="button" id="insert-image">Insert Image</button>
        <button type="button" id="take-screenshot">Take Dashboard Screenshot</button>
        <div id="screenshot-preview"></div>
      </div>

      <!-- User name display -->
      <div>
        <p>Submitting as <strong id="username-display"></strong></p>
      </div>

      <!-- Form buttons -->
      <div class="form-buttons">
        <button type="submit" id="submit-feedback">Submit</button>
        <button type="button" id="cancel-feedback">Cancel</button>
      </div>
    </form>

    <!-- Button to Track Previous Submissions -->
    <button id="track-previous">Track Previous Submissions</button>
  </div>

  <div id="feedback-list-container" class="container d-none">
    <!-- Feedback List -->
    <h2>Your Feedback Submissions</h2>
    <table id="feedback-list-table">
      <!-- Table populated by JS -->
    </table>

    <!-- Comments Section -->
    <h2>Comments</h2>
    <div id="comments-container">
      <!-- Comments populated by JS -->
    </div>
    <textarea id="new-comment" placeholder="Add a comment..."></textarea>
    <button id="submit-comment">Submit Comment</button>
  </div>

  <script src="script.js"></script> <!-- JavaScript logic in script.js -->
</body>
</html>
